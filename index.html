<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>node-potter by daizoru</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>node-potter</h1>
        <p>Draw Something In 3D Voxel Space</p>
        <p class="view"><a href="https://github.com/daizoru/node-potter">View the Project on GitHub <small>daizoru/node-potter</small></a></p>
        <ul>
          <li><a href="https://github.com/daizoru/node-potter/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/daizoru/node-potter/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/daizoru/node-potter">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>node-potter</h1>

<p>Draw and Print Something in 3D Voxel Space</p>

<h2>overview</h2>

<p>A library to draw things in a 3D grid space using voxels (3D pixels).</p>

<p>The interface is simple - and you export your creation to a few file formats.</p>

<p>For an example, I did my best to create an accurate, voxel-based dog:</p>

<p><img src="http://img528.imageshack.us/img528/518/doggy.png" alt="doogy"></p>

<p>Cool? Ok, you can do it, too. You just have to npm install potter.</p>

<p>The ultimate goal is to support different material-by-voxel, to allow creation of models and objects with different colors, textures, materials in the inside (not just surface) </p>

<p>For the moment very few 3D printers support this (?), so you may have to build your own. Yep, this is hacker's stuff.</p>

<p>That said, you can try an experimental .STL export right now, to print models using common commercial and DIY printers.
  (Basically, voxels are converted to 3D cubes, mades of regular triangles. Unfortunately, this means HUGE files, like 200 megabytes)</p>

<h2>why</h2>

<p>Because it's funny. If you don't get why, you should probably browse something else on Github.</p>

<h2>TODO</h2>

<ul>
<li>advanced streaming features - better buffering, and broadcast..</li>
<li>.. in order to develop a WebGL renderer to visualize the voxel stream</li>
<li>support binary STL (and colors)</li>
<li>implement more materials: <a href="http://www.matbase.com/matbase_material_properties_database.html">http://www.matbase.com/matbase_material_properties_database.html</a>
</li>
</ul><h2>install</h2>

<p>globally:</p>

<pre><code>$ npm install potter -g
</code></pre>

<p>as a dependency of your Node project:</p>

<pre><code>$ npm install potter
</code></pre>

<h2>usage</h2>

<div class="highlight">
<pre>
  <span class="kd">var</span> <span class="nx">Potter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'potter'</span><span class="p">);</span>

  <span class="c1">// initialize a voxel matrix</span>
  <span class="kd">var</span> <span class="nx">pot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Potter</span><span class="p">({</span>
    <span class="nx">size</span><span class="o">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
  <span class="p">});</span>

  <span class="c1">// define a new material</span>
  <span class="kd">var</span> <span class="nx">plastic</span> <span class="o">=</span> <span class="nx">pot</span><span class="p">.</span><span class="nx">material</span><span class="p">(</span><span class="s2">"plastic"</span><span class="p">,</span> <span class="s2">"red"</span><span class="p">);</span>

  <span class="c1">// and use it</span>
  <span class="nx">pot</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">plastic</span><span class="p">);</span>

  <span class="c1">// draw voxels using plastic</span>
  <span class="nx">pot</span><span class="p">.</span><span class="nx">dot</span><span class="p">([</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span> <span class="p">]);</span>
  <span class="nx">pot</span><span class="p">.</span><span class="nx">dot</span><span class="p">([</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span> <span class="p">]);</span>

  <span class="c1">// it's easier if you use it this way</span>
  <span class="kd">var</span> <span class="nx">p1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">p2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">15</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">p3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">];</span>

  <span class="c1">// you can draw lines as well</span>
  <span class="nx">pot</span><span class="p">.</span><span class="nx">line</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p3</span><span class="p">);</span>

  <span class="c1">// you can also draw over a "3D path"</span>
  <span class="nx">pot</span><span class="p">.</span><span class="nx">trace</span><span class="p">([</span> <span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">,</span> <span class="nx">p3</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="nx">pot</span><span class="p">.</span><span class="nx">sphere</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">radius</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="c1">// you can save to a variety of point cloud formats</span>
  <span class="nx">pot</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="s2">"model.pcd"</span><span class="p">);</span> 

  <span class="c1">// experimental export to STL</span>
  <span class="nx">pot</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="s2">"model.stl"</span><span class="p">);</span>

  <span class="c1">// async syntax is supported</span>
  <span class="nx">pot</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="s2">"model.xyz"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"file saved"</span><span class="p">);</span>
  <span class="p">});</span>

</pre>
</div>


<h2>Demo</h2>

<h3>In CoffeeScript - please fasten your seatbelt</h3>

<div class="highlight">
<pre><span class="c1">#!/usr/bin/env coffee</span>

<span class="p">{</span><span class="nx">log</span><span class="p">,</span><span class="nx">error</span><span class="p">,</span><span class="nx">inspect</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span> <span class="s">'util'</span>
<span class="nv">Potter = </span><span class="nx">require</span> <span class="s">'potter'</span>

<span class="nv">name = </span><span class="s">"dog"</span>

<span class="c1"># create a new voxel matrix</span>
<span class="nv">dog = </span><span class="k">new</span> <span class="nx">Potter</span> <span class="nv">size: </span><span class="p">[</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1000</span><span class="p">]</span>

<span class="c1"># create a brown plastic material. let's call it "fur"</span>
<span class="nv">fur = </span><span class="nx">dog</span><span class="p">.</span><span class="nx">material</span> <span class="s">"plastic"</span><span class="p">,</span> <span class="s">"brown"</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">use</span> <span class="nx">fur</span>

<span class="c1"># front</span>
<span class="nv">pfr = </span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="nv">pft = </span><span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">]</span>
<span class="nv">pfl = </span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>

<span class="c1"># back</span>
<span class="nv">pbr = </span><span class="p">[</span><span class="mi">500</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="nv">pbt = </span><span class="p">[</span><span class="mi">400</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">]</span>
<span class="nv">pbl = </span><span class="p">[</span><span class="mi">500</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>

<span class="nv">leg  = </span><span class="nf">(p) -&gt;</span> <span class="nx">dog</span><span class="p">.</span><span class="nx">sphere</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span>
<span class="nv">body = </span><span class="nf">(p) -&gt;</span> <span class="nx">dog</span><span class="p">.</span><span class="nx">sphere</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">32</span>

<span class="c1"># front legs</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">trace</span> <span class="p">[</span><span class="nx">pfr</span><span class="p">,</span><span class="nx">pft</span><span class="p">,</span><span class="nx">pfl</span><span class="p">],</span> <span class="nx">leg</span>

<span class="c1"># body</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">trace</span> <span class="p">[</span><span class="nx">pft</span><span class="p">,</span><span class="nx">pbt</span><span class="p">],</span> <span class="nx">body</span>

<span class="c1"># back legs</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">trace</span> <span class="p">[</span><span class="nx">pbr</span><span class="p">,</span><span class="nx">pbt</span><span class="p">,</span><span class="nx">pbl</span><span class="p">],</span> <span class="nx">leg</span>

<span class="c1"># export the dog voxel matrix to STL, for 3D printing</span>
<span class="nx">log</span> <span class="s">"saving.."</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">save</span> <span class="s">"examples/exports/</span><span class="si">#{</span><span class="nx">name</span><span class="si">}</span><span class="s">.stl"</span><span class="p">,</span> <span class="o">-&gt;</span>
  <span class="nx">log</span> <span class="s">"file saved"</span>

</pre>
</div>


<p>Then if you run it: </p>

<pre><code>$ coffee examples/basic/test_dog.coffee 
</code></pre>

<p>It should give you this:</p>

<p><img src="http://img641.imageshack.us/img641/3148/doggy2.png" alt="doggy"></p>

<p>With a lot of voxels. Really. A lot.</p>

<p>WARNING: it make take a couple of MINUTES for Node.js
  to write all the buffer to disk (this happens AFTER the "file saved" msg,
  and freeze the app for some time)</p>

<h2>Running the other examples</h2>

<h3>Sponge</h3>

<pre><code>$ coffee examples/basic/ref_sponge.coffee 
</code></pre>

<h3>Egg</h3>

<pre><code>$ coffee examples/basic/ref_egg.coffee 
</code></pre>

<h2>List of functions</h2>

<p>Documentation legend</p>

<div class="highlight">
<pre>  <span class="n">foo</span> <span class="o">({</span> <span class="n">x</span><span class="k">:</span><span class="kt">Number</span> <span class="o">});</span>
</pre>
</div>


<p>means function foo takes an object as argument, this object should have an entry with key 'x' and value of type Number</p>

<div class="highlight">
<pre>  <span class="n">foo</span> <span class="o">(</span> <span class="n">x</span><span class="k">=</span><span class="nc">Number</span> <span class="o">);</span> 
</pre>
</div>


<p>means function foo takes one argument, x, which should be a Number</p>

<h3>pot = new Potter({size:[x,y,z]})</h3>

<h3>Material m = pot.material({ })</h3>

<p>Create a material</p>

<h3>pot.use(material=Material)</h3>

<p>Use a material for all next drawing operations</p>

<h3>pot.dot(position=[x,y,z])</h3>

<p>Draw a voxel at a give coordinate</p>

<h3>pot.line(from=[x1,y1,z1], to=[x2,y2,z2])</h3>

<p>Draw a line in 3D</p>

<h3>pot.sphere(position=[x,y,z], inner=Number, outer=Number)</h3>

<p>Draw a sphere, using a center, inner radius (radius of the inside hole), and outer radius (the 'real' radius)</p>

<h3>pot.section(position=[x,y,z],plane=[u,v,w])</h3>

<p>Cut the model - do a section (nice for autopsy or medical research)</p>

<p>Where x,y,z are the center of the section plane,
and u,v,w is the plane axis. example:</p>

<div class="highlight">
<pre><span class="nx">pot</span><span class="p">.</span><span class="nx">section</span><span class="p">([</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">z</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]);</span>
</pre>
</div>


<p>will cut the model in half, on the X axis,</p>

<div class="highlight">
<pre><span class="nx">pot</span><span class="p">.</span><span class="nx">section</span><span class="p">([</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">z</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]);</span>
</pre>
</div>


<p>will cut the model in half, on the X axis, but in the other direction, and:</p>

<div class="highlight">
<pre><span class="nx">pot</span><span class="p">.</span><span class="nx">section</span><span class="p">([</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">,</span><span class="nx">z</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]);</span>
</pre>
</div>


<p>will cut the model in a quarter, on the Y/Z axis.</p>

<h2>Supported output format</h2>

<h3>STL</h3>

<p>Yes! it is working! I got inspiration from</p>

<p><a href="https://github.com/codys/minecraft.print/blob/master/minecraft_print.py">https://github.com/codys/minecraft.print/blob/master/minecraft_print.py</a></p>

<h3>PCD (Point Cloud Data)</h3>

<p>Specs: 
  <a href="http://pointclouds.org/documentation/tutorials/pcd_file_format.php">http://pointclouds.org/documentation/tutorials/pcd_file_format.php</a></p>

<p>Sample:</p>

<pre><code>VERSION .7
FIELDS x y z rgb
SIZE 4 4 4 4
TYPE I I I I
COUNT 1 1 1 1
WIDTH 3
HEIGHT 1
VIEWPOINT 0 0 0 1 0 0 0
POINTS 3
DATA ascii
5 5 5 1
4 5 6 1
5 3 7 2
</code></pre>

<h3>PTS</h3>

<p>Spec: </p>

<pre><code>
   NB_POINTS
   X Y Z INTENSITY R G B
   X Y Z INTENSITY R G B
   ...

</code></pre>

<p>Sample:</p>

<pre><code>3
5 5 5 1 0 0 2
4 5 6 1 0 0 2
5 3 7 1 0 0 3
</code></pre>

<h3>XYZ</h3>

<p>Sample:</p>

<pre><code>5 5 5
4 5 6
5 3 7
</code></pre>

<h2>Changelog</h2>

<h3>0.0.2</h3>

<ul>
<li>better Potter::sphere() algorithm, with optional thickness (useful for fillings!)</li>
<li>added Potter::section(), you can use it to cut a model for autopsy</li>
<li>added Potter.vacuum, which is a shortcut to material 0 (vacuum)</li>
<li>various minor bugfixes</li>
</ul><h3>0.0.1</h3>

<ul>
<li>second, less crappy version </li>
<li>fucking much faster (except if you do export STL files)</li>
</ul><h3>0.0.0</h3>

<ul>
<li>initial crappy version</li>
</ul>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/daizoru">daizoru</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
    
  </body>
</html>